(()=>{var R=Object.defineProperty;var W=(s,e,t)=>e in s?R(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var A=(s,e,t)=>W(s,typeof e!="symbol"?e+"":e,t);var T={showAllSuggestions:!1,suggestionsThreshold:1,maximumItems:0,autoselectFirst:!0,ignoreEnter:!1,tabSelect:!1,updateOnSelect:!1,highlightTyped:!1,highlightClass:"",fullWidth:!1,fixed:!1,fuzzy:!1,startsWith:!1,fillIn:!1,preventBrowserAutocomplete:!1,itemClass:"",activeClasses:["bg-primary","text-white"],labelField:"label",valueField:"value",searchFields:["label"],queryParam:"query",items:[],source:null,hiddenInput:!1,hiddenValue:"",clearControl:"",datalist:"",server:"",serverMethod:"GET",serverParams:{},serverDataKey:"data",fetchOptions:{},liveServer:!1,noCache:!0,debounceTime:300,notFoundMessage:"",onRenderItem:(s,e,t)=>e,onSelectItem:(s,e)=>{},onClearItem:(s,e)=>{},onServerResponse:(s,e)=>s.json(),onServerError:(s,e,t)=>{s.name==="AbortError"||e.aborted||console.error(s)},onChange:(s,e)=>{},onBeforeFetch:s=>{},onAfterFetch:s=>{}},k="is-loading",M="is-active",f="show",p="next",m="prev",_=new WeakMap,D=0,g=0;function j(s,e=300){let t;return(...i)=>{clearTimeout(t),t=setTimeout(()=>{s.apply(this,i)},e)}}function G(s){return s.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function v(s){return s?G(s.toString()).toLowerCase():""}function J(s,e){if(s.indexOf(e)>=0)return!0;let t=0;for(let i=0;i<e.length;i++){let n=e[i];if(n!==" "&&(t=s.indexOf(n,t)+1,t<=0))return!1}return!0}function O(s,e){return s.parentNode.insertBefore(e,s.nextSibling)}function K(s){let e=document.createElement("textarea");return e.innerHTML=s,e.value}function b(s,e){for(let[t,i]of Object.entries(e))s.setAttribute(t,i)}function U(s){s.ariaLabel=s.innerText,s.innerHTML=s.innerText.split("").map(e=>e+"&zwj;").join("")}function Y(s,e="window"){return s.split(".").reduce((t,i)=>t[i],e)}var I=class{constructor(e,t={}){A(this,"handleEvent",e=>{["scroll","resize"].includes(e.type)?(this._timer&&window.cancelAnimationFrame(this._timer),this._timer=window.requestAnimationFrame(()=>{this["on".concat(e.type)](e)})):this["on".concat(e.type)](e)});if(!(e instanceof HTMLElement)){console.error("Invalid element",e);return}_.set(e,this),D++,g++,this._searchInput=e,this._configure(t),this._isMouse=!1,this._preventInput=!1,this._keyboardNavigation=!1,this._searchFunc=j(()=>{this._loadFromServer(!0)},this._config.debounceTime),this._configureSearchInput(),this._configureDropElement(),this._config.fixed&&(document.addEventListener("scroll",this,!0),window.addEventListener("resize",this));let i=this._getClearControl();i&&i.addEventListener("click",this),["focus","change","blur","input","beforeinput","keydown"].forEach(n=>{this._searchInput.addEventListener(n,this)}),["mousemove","mouseenter","mouseleave"].forEach(n=>{this._dropElement.addEventListener(n,this)}),this._fetchData()}static init(e="input.autocomplete",t={}){document.querySelectorAll(e).forEach(n=>{this.getOrCreateInstance(n,t)})}static getInstance(e){return _.has(e)?_.get(e):null}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,t)}dispose(){g--,["focus","change","blur","input","beforeinput","keydown"].forEach(t=>{this._searchInput.removeEventListener(t,this)}),["mousemove","mouseenter","mouseleave"].forEach(t=>{this._dropElement.removeEventListener(t,this)});let e=this._getClearControl();e&&e.removeEventListener("click",this),this._config.fixed&&g<=0&&(document.removeEventListener("scroll",this,!0),window.removeEventListener("resize",this)),this._dropElement.parentElement.removeChild(this._dropElement),_.delete(this._searchInput)}_getClearControl(){if(this._config.clearControl)return document.querySelector(this._config.clearControl)}_configure(e={}){this._config=Object.assign({},T);let t={...e,...this._searchInput.dataset},i=n=>["true","false","1","0",!0,!1].includes(n)&&!!JSON.parse(n);for(let[n,r]of Object.entries(T)){if(t[n]===void 0)continue;let o=t[n];switch(typeof r){case"number":this._config[n]=parseInt(o);break;case"boolean":this._config[n]=i(o);break;case"string":this._config[n]=o.toString();break;case"object":if(Array.isArray(r))if(typeof o=="string"){let a=o.includes("|")?"|":",";this._config[n]=o.split(a)}else this._config[n]=o;else this._config[n]=typeof o=="string"?JSON.parse(o):o;break;case"function":this._config[n]=typeof o=="string"?window[o]:o;break;default:this._config[n]=o;break}}}_configureSearchInput(){if(this._searchInput.autocomplete="off",this._searchInput.spellcheck=!1,b(this._searchInput,{"aria-autocomplete":"list","aria-haspopup":"menu","aria-expanded":"false",role:"combobox"}),this._searchInput.id&&this._config.preventBrowserAutocomplete){let e=document.querySelector('[for="'.concat(this._searchInput.id,'"]'));e&&U(e)}this._hiddenInput=null,this._config.hiddenInput&&(this._hiddenInput=document.createElement("input"),this._hiddenInput.type="hidden",this._hiddenInput.value=this._config.hiddenValue,this._hiddenInput.name=this._searchInput.name,this._searchInput.name="_"+this._searchInput.name,O(this._searchInput,this._hiddenInput))}_configureDropElement(){this._dropElement=document.createElement("ul"),this._dropElement.id="ac-menu-"+D,this._dropElement.classList.add("dropdown-menu","autocomplete-menu","p-0"),this._dropElement.style.maxHeight="280px",this._config.fullWidth||(this._dropElement.style.maxWidth="360px"),this._config.fixed&&(this._dropElement.style.position="fixed"),this._dropElement.style.overflowY="auto",this._dropElement.style.overscrollBehavior="contain",this._dropElement.style.textAlign="unset",O(this._searchInput,this._dropElement),this._searchInput.setAttribute("aria-controls",this._dropElement.id)}onclick(e){e.target instanceof Element&&e.target.matches(this._config.clearControl)&&this.clear()}onbeforeinput(e){this._preventInput||this._hiddenInput&&this._hiddenInput.value&&(this._config.onClearItem(this._searchInput.value,this),this._hiddenInput.value=null)}oninput(e){this._preventInput||this.showOrSearch()}onchange(e){let t=this._searchInput.value,i=this._items.find(n=>n.label===t);this._config.onChange(i,this)}onblur(e){let t=e.relatedTarget;if(this._isMouse&&t instanceof HTMLElement&&(t.classList.contains("modal")||t.classList.contains("autocomplete-menu"))){this._searchInput.focus();return}setTimeout(()=>{this.hideSuggestions()},100)}onfocus(e){this.showOrSearch()}onkeydown(e){switch(e.keyCode||e.key){case 13:case"Enter":if(this.isDropdownVisible()){let i=this.getSelection();i&&i.click(),(i||!this._config.ignoreEnter)&&e.preventDefault()}break;case 9:case"Tab":if(this.isDropdownVisible()&&this._config.tabSelect){let i=this.getSelection();i&&(i.click(),e.preventDefault())}break;case 38:case"ArrowUp":e.preventDefault(),this._keyboardNavigation=!0,this._moveSelection(m);break;case 40:case"ArrowDown":e.preventDefault(),this._keyboardNavigation=!0,this.isDropdownVisible()?this._moveSelection(p):this.showOrSearch(!1);break;case 27:case"Escape":this.isDropdownVisible()&&(this._searchInput.focus(),this.hideSuggestions());break}}onmouseenter(e){this._isMouse=!0}onmousemove(e){this._isMouse=!0,this._keyboardNavigation=!1}onmouseleave(e){this._isMouse=!1,this.removeSelection()}onscroll(e){this._positionMenu()}onresize(e){this._positionMenu()}getConfig(e=null){return e!==null?this._config[e]:this._config}setConfig(e,t){this._config[e]=t}setData(e){this._items=[],this._addItems(e)}enable(){this._searchInput.setAttribute("disabled","")}disable(){this._searchInput.removeAttribute("disabled")}isDisabled(){return this._searchInput.hasAttribute("disabled")||this._searchInput.disabled||this._searchInput.hasAttribute("readonly")}isDropdownVisible(){return this._dropElement.classList.contains(f)}clear(){let e=this._searchInput.value;this._searchInput.value="",this._hiddenInput&&(this._hiddenInput.value=""),this._config.onClearItem(e,this)}getSelection(){return this._dropElement.querySelector("a."+M)}removeSelection(){let e=this.getSelection();e&&e.classList.remove(...this._activeClasses())}_activeClasses(){return[...this._config.activeClasses,M]}_isItemEnabled(e){if(e.style.display==="none")return!1;let t=e.firstElementChild;return t.tagName==="A"&&!t.classList.contains("disabled")}_moveSelection(e=p,t=null){let i=this.getSelection();if(i){let n=e===p?"nextSibling":"previousSibling";t=i.parentNode;do t=t[n];while(t&&!this._isItemEnabled(t));t?(i.classList.remove(...this._activeClasses()),e===m?t.parentNode.scrollTop=t.offsetTop-t.parentNode.offsetTop:t.offsetTop>t.parentNode.offsetHeight-t.offsetHeight&&(t.parentNode.scrollTop+=t.offsetHeight)):i&&(t=i.parentElement)}else{if(e===m)return t;if(!t)for(t=this._dropElement.firstChild;t&&!this._isItemEnabled(t);)t=t.nextSibling}if(t){let n=t.querySelector("a");n.classList.add(...this._activeClasses()),this._searchInput.setAttribute("aria-activedescendant",n.id),this._config.updateOnSelect&&(this._searchInput.value=n.dataset.label)}else this._searchInput.setAttribute("aria-activedescendant","");return t}_shouldShow(){return this.isDisabled()?!1:this._searchInput.value.length>=this._config.suggestionsThreshold}showOrSearch(e=!0){if(e&&!this._shouldShow()){this.hideSuggestions();return}this._config.liveServer?this._searchFunc():this._config.source?this._config.source(this._searchInput.value,t=>{this.setData(t),this._showSuggestions()}):this._showSuggestions()}_createGroup(e){let t=this._createLi(),i=document.createElement("span");return t.append(i),i.classList.add("dropdown-header","text-truncate"),i.innerHTML=e,t}_createItem(e,t){let i=t.label;if(this._config.highlightTyped){let o=v(i).indexOf(e);o!==-1&&(i=i.substring(0,o)+'<mark class="'.concat(this._config.highlightClass,'">').concat(i.substring(o,o+e.length),"</mark>")+i.substring(o+e.length,i.length))}i=this._config.onRenderItem(t,i,this);let n=this._createLi(),r=document.createElement("a");if(n.append(r),r.id=this._dropElement.id+"-"+this._dropElement.children.length,r.classList.add("dropdown-item","text-truncate"),this._config.itemClass&&r.classList.add(...this._config.itemClass.split(" ")),r.setAttribute("data-value",t.value),r.setAttribute("data-label",t.label),r.setAttribute("tabindex","-1"),r.setAttribute("role","menuitem"),r.setAttribute("href","#"),r.innerHTML=i,t.data)for(let[o,a]of Object.entries(t.data))r.dataset[o]=a;if(this._config.fillIn){let o=document.createElement("button");o.type="button",o.classList.add("btn","btn-link","border-0"),o.innerHTML='<svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">\n      <path fill-rule="evenodd" d="M2 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1H3.707l10.147 10.146a.5.5 0 0 1-.708.708L3 3.707V8.5a.5.5 0 0 1-1 0z"/>\n      </svg>',n.append(o),n.classList.add("d-flex","justify-content-between"),o.addEventListener("click",a=>{this._searchInput.value=t.label,this._searchInput.focus()})}return r.addEventListener("mouseenter",o=>{if(this._keyboardNavigation||!this._isMouse)return;this.removeSelection();let a=n.querySelector("a");a.classList.add(...this._activeClasses()),this._searchInput.setAttribute("aria-activedescendant",a.id)}),r.addEventListener("mousedown",o=>{o.preventDefault()}),r.addEventListener("click",o=>{o.preventDefault(),this._preventInput=!0,this._searchInput.value=K(t.label),this._hiddenInput&&(this._hiddenInput.value=t.value),this._config.onSelectItem(t,this),this.hideSuggestions(),this._preventInput=!1}),n}_getActiveElement(e=document){let t=e.activeElement;return t?t.shadowRoot?this._getActiveElement(t.shadowRoot):t:null}_showSuggestions(){if(this._getActiveElement()!==this._searchInput)return;let e=v(this._searchInput.value);this._dropElement.innerHTML="";let t=0,i=null,n=[];for(let r of this._items){let o=this._config.showAllSuggestions||e.length===0,a=e.length===0&&this._config.suggestionsThreshold===0;e.length>0&&this._config.searchFields.forEach(l=>{let c=v(r[l]),u=!1;if(this._config.fuzzy)u=J(c,e);else{let x=c.indexOf(e);u=this._config.startsWith?x===0:x>=0}u&&(a=!0)});let h=a||e.length===0;if(o||a){if(t++,r.group&&!n.includes(r.group)){let c=this._createGroup(r.group);this._dropElement.appendChild(c),n.push(r.group)}let l=this._createItem(e,r);if(!i&&h&&(i=l),this._dropElement.appendChild(l),this._config.maximumItems>0&&t>=this._config.maximumItems)break}}if(i&&this._config.autoselectFirst&&(this.removeSelection(),this._moveSelection(p,i)),t===0)if(this._config.notFoundMessage){let r=this._createLi();r.innerHTML='<span class="dropdown-item">'.concat(this._config.notFoundMessage,"</span>"),this._dropElement.appendChild(r),this._showDropdown()}else this.hideSuggestions();else this._showDropdown()}_createLi(){let e=document.createElement("li");return e.setAttribute("role","presentation"),e}_showDropdown(){this._dropElement.classList.add(f),this._dropElement.setAttribute("role","menu"),b(this._searchInput,{"aria-expanded":"true"}),this._positionMenu()}toggleSuggestions(e=!0){this._dropElement.classList.contains(f)?this.hideSuggestions():this.showOrSearch(e)}hideSuggestions(){this._dropElement.classList.remove(f),b(this._searchInput,{"aria-expanded":"false"}),this.removeSelection()}getInput(){return this._searchInput}getDropMenu(){return this._dropElement}_positionMenu(){let e=this._searchInput.getBoundingClientRect(),t=this._searchInput.dir==="rtl"||this._searchInput.dir===""&&document.dir==="rtl",i=this._config.fullWidth,n=this._config.fixed,r=null,o=null;n&&(r=e.x,o=e.y+e.height,t&&!i&&(r-=this._dropElement.offsetWidth-e.width)),this._dropElement.style.transform="unset",i&&(this._dropElement.style.width=this._searchInput.offsetWidth+"px"),r!==null&&(this._dropElement.style.left=r+"px"),o!==null&&(this._dropElement.style.top=o+"px");let a=this._dropElement.getBoundingClientRect(),h=window.innerHeight;if(a.y+a.height>h){let l=i?e.height+4:e.height;this._dropElement.style.transform="translateY(calc(-100.1% - "+l+"px))"}}_fetchData(){this._items=[],this._addItems(this._config.items);let e=this._config.datalist;if(e){let t=document.querySelector("#".concat(e));if(t){let i=Array.from(t.children).map(n=>{var a;let r=(a=n.getAttribute("value"))!=null?a:n.innerHTML.toLowerCase(),o=n.innerHTML;return{value:r,label:o}});this._addItems(i)}else console.error("Datalist not found ".concat(e))}this._setHiddenVal(),this._config.server&&!this._config.liveServer&&this._loadFromServer()}_setHiddenVal(){if(this._config.hiddenInput&&!this._config.hiddenValue)for(let e of this._items)e.label==this._searchInput.value&&(this._hiddenInput.value=e.value)}_normalizeData(e){if(Array.isArray(e))return e;let t=[];for(let[i,n]of Object.entries(e))t.push({value:i,label:n});return t}_addItems(e){var t,i;e=this._normalizeData(e);for(let n of e){if(n.group&&n.items){n.items.forEach(a=>a.group=n.group),this._addItems(n.items);continue}let r=typeof n=="string"?n:n.label,o=typeof n!="object"?{}:n;o.label=(t=n[this._config.labelField])!=null?t:r,o.value=(i=n[this._config.valueField])!=null?i:r,o.label&&this._items.push(o)}}_loadFromServer(e=!1){this._abortController&&this._abortController.abort(),this._abortController=new AbortController,this._config.onBeforeFetch(this);let t=this._searchInput.dataset.serverParams||{};typeof t=="string"&&(t=JSON.parse(t));let i=Object.assign({},this._config.serverParams,t);i[this._config.queryParam]=this._searchInput.value,this._config.noCache&&(i.t=Date.now()),i.related&&(Array.isArray(i.related)?i.related:[i.related]).forEach(h=>{let l=document.getElementById(h);if(l instanceof HTMLInputElement){let c=l.value,u=l.getAttribute("name");u&&(i[u]=c)}});let n=new URLSearchParams(i),r=this._config.server,o=Object.assign(this._config.fetchOptions,{method:this._config.serverMethod||"GET",signal:this._abortController.signal});o.method==="POST"?o.body=n:(r.indexOf("?")==-1?r+="?":r+="&",r+=n.toString()),this._searchInput.classList.add(k),fetch(r,o).then(a=>this._config.onServerResponse(a,this)).then(a=>{let h=Y(this._config.serverDataKey,a)||a;this.setData(h),this._setHiddenVal(),this._abortController=null,e&&this._showSuggestions()}).catch(a=>{this._config.onServerError(a,this._abortController.signal,this)}).finally(a=>{this._searchInput.classList.remove(k),this._config.onAfterFetch(this)})}},F=I;var E=s=>typeof s=="string";var d=s=>s.split(".").reduce((e,t)=>e[t],window);var H=s=>{E(s)&&(s=s[0]==="{"?JSON.parse(s):d(s));for(let[e,t]of Object.entries(s))if(t&&typeof t=="object"){let i=t.__fn;E(i)?s[e]=d(i):H(t)}return s},N=H;var z=s=>s?(s[0]!=="{"&&s.includes(":")&&(s="{".concat(s.replace(/([^:\s{,]*)\s*:\s*('[^']*'|"[^"]*"|([\[].*?[\]])|[^,'"{\[]*)/g,(e,t,i)=>'"'.concat(t.replace(/['"]/g,""),'":').concat(i.includes('"')?i:i.replace(/'/g,'"'))),"}")),s[0]==="{"?JSON.parse(s):d(s)):{};var X=s=>{let e=s;do{if(e.nextSibling){s.parsedCallback();return}e=e.parentNode}while(e);setTimeout(()=>{s.parsedCallback()})},V=X;var S="__fe_id";window[S]=window[S]||0;var w=new Map,y=class extends HTMLElement{_restoreContent(){this.id=this.id||"fe-".concat(window[S]++);let e=w.get(this.id);e?e!==this.innerHTML&&(this.innerHTML=e):w.set(this.id,this.innerHTML)}connectedCallback(){this._t&&clearTimeout(this._t),V(this)}disconnectedCallback(){this.disconnected(),this._t=setTimeout(()=>{this.destroyed(),this.config=null,document.getElementById(this.id)||w.delete(this.id)},1e3)}parsedCallback(){this.config||(this._restoreContent(),this.config=N(z(this.dataset.config)),this.created()),this.connected()}created(){}destroyed(){}connected(){}disconnected(){}},q=y;var B=(s,e)=>{e=typeof e=="string"?[e]:e,e.forEach(t=>{s.querySelectorAll(t).forEach(i=>{i.remove()})})};var C=class extends q{get el(){return this.querySelector("input")}get value(){return this.el.value}created(){B(this,"div.dropdown"),this.config=Object.assign({hiddenInput:!0},this.config),this.lib=new F(this.el,this.config)}destroyed(){this.lib.dispose(),this.lib=null}},L=C;var P=customElements,$=(s,e)=>{P.get(s)||P.define(s,e)};$("bs-autocomplete",L);var Ee=L;})();
/*! Bundled license information:

bootstrap5-autocomplete/autocomplete.js:
  (**
   * Bootstrap 5 autocomplete
   * https://github.com/lekoala/bootstrap5-autocomplete
   * @license MIT
   *)
*/
