"use strict";(()=>{var V={items:[],allowNew:!1,showAllSuggestions:!1,badgeStyle:"primary",allowClear:!1,clearEnd:!1,selected:[],regex:"",separator:[],max:0,clearLabel:"Clear",searchLabel:"Type a value",keepOpen:!1,allowSame:!1,baseClass:"",placeholder:"",addOnBlur:!1,showDisabled:!1,hideNativeValidation:!1,suggestionsThreshold:-1,maximumItems:0,autoselectFirst:!0,updateOnSelect:!1,highlightTyped:!1,fullWidth:!1,fixed:!1,fuzzy:!1,singleBadge:!1,activeClasses:["bg-primary","text-white"],labelField:"label",valueField:"value",searchFields:["label"],queryParam:"query",server:"",serverMethod:"GET",serverParams:{},serverDataKey:"data",fetchOptions:{},liveServer:!1,noCache:!0,debounceTime:300,notFoundMessage:"",onRenderItem:(l,e,t)=>e,onSelectItem:(l,e)=>{},onClearItem:(l,e)=>{},onCreateItem:(l,e)=>{},onBlur:(l,e)=>{},onFocus:(l,e)=>{},onCanAdd:(l,e,t)=>{},onServerResponse:(l,e)=>l.json()},b="tags-",W="is-loading",B="is-active",p="is-invalid",w="show",g="data-value",I="next",L="prev",q="form-control-focus",P="form-placeholder-shown",R="form-control-disabled",x=new WeakMap,j=0,A=0;function ie(l,e=300){let t;return(...s)=>{clearTimeout(t),t=setTimeout(()=>{l.apply(this,s)},e)}}function ne(l,e=null){let t=f("span");document.body.appendChild(t),t.style.fontSize=e||"inherit",t.style.height="auto",t.style.width="auto",t.style.position="absolute",t.style.whiteSpace="no-wrap",t.innerHTML=l;let s=Math.ceil(t.clientWidth);return document.body.removeChild(t),s}function le(l){return l.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function k(l){return l?le(l.toString()).toLowerCase():""}function re(l,e){if(l.indexOf(e)>=0)return!0;let t=0;for(let s=0;s<e.length;s++){let i=e[s];if(i!=" "&&(t=l.indexOf(i,t)+1,t<=0))return!1}return!0}function C(l){l.style.display="none",y(l,{"aria-hidden":"true"})}function z(l){l.style.display="list-item",y(l,{"aria-hidden":"false"})}function y(l,e){for(let[t,s]of Object.entries(e))l.setAttribute(t,s)}function v(l,e){l.hasAttribute(e)&&l.removeAttribute(e)}function oe(l){return["true","false","1","0",!0,!1].includes(l)&&!!JSON.parse(l)}function f(l){return document.createElement(l)}var E=class{constructor(e,t={}){if(!(e instanceof HTMLElement)){console.error("Invalid element",e);return}x.set(e,this),j++,A++,this._selectElement=e,this._configure(t),this._keyboardNavigation=!1,this._searchFunc=ie(()=>{this._loadFromServer(!0)},this._config.debounceTime),this._fireEvents=!0,this._configureParent(),this._holderElement=f("div"),this._containerElement=f("div"),this._holderElement.appendChild(this._containerElement),this._selectElement.parentElement.insertBefore(this._holderElement,this._selectElement),this._configureHolderElement(),this._configureContainerElement(),this._configureSelectElement(),this._configureSearchInput(),this._configureDropElement(),this.resetState(),this._config.fixed&&(document.addEventListener("scroll",this,!0),window.addEventListener("resize",this)),this._searchInput.addEventListener("focus",this),this._searchInput.addEventListener("blur",this),this._searchInput.addEventListener("input",this),this._searchInput.addEventListener("keydown",this),this._dropElement.addEventListener("mousemove",this),this.loadData(!0)}static init(e="select[multiple]",t={}){let s=document.querySelectorAll(e);for(let i=0;i<s.length;i++)E.getInstance(s[i])||new E(s[i],t)}static getInstance(e){if(x.has(e))return x.get(e)}dispose(){A--,this._searchInput.removeEventListener("focus",this),this._searchInput.removeEventListener("blur",this),this._searchInput.removeEventListener("input",this),this._searchInput.removeEventListener("keydown",this),this._dropElement.removeEventListener("mousemove",this),this._config.fixed&&A<=0&&(document.removeEventListener("scroll",this,!0),window.removeEventListener("resize",this)),this._selectElement.style.display="block",this._holderElement.parentElement.removeChild(this._holderElement),this.parentForm&&this.parentForm.removeEventListener("reset",this),x.delete(this._selectElement)}handleEvent(e){["scroll","resize"].includes(e.type)?(this._timer&&window.cancelAnimationFrame(this._timer),this._timer=window.requestAnimationFrame(()=>{this[`on${e.type}`](e)})):this[`on${e.type}`](e)}_configure(e={}){this._config=Object.assign({},V);let t=this._selectElement.dataset.config?JSON.parse(this._selectElement.dataset.config):{},s={...e,...t,...this._selectElement.dataset};for(let[i,o]of Object.entries(V)){if(i=="config"||s[i]===void 0)continue;let n=s[i];switch(typeof o){case"number":this._config[i]=parseInt(n);break;case"boolean":this._config[i]=oe(n);break;case"string":this._config[i]=n.toString();break;case"object":this._config[i]=n,typeof n=="string"&&(["{","["].includes(n[0])?this._config[i]=JSON.parse(n):this._config[i]=n.split(n.includes("|")?"|":","));break;case"function":this._config[i]=typeof n=="string"?n.split(".").reduce((r,a)=>r[a],window):n,this._config[i]||console.error("Invalid function",n);break;default:this._config[i]=n;break}}this._config.placeholder||(this._config.placeholder=this._getPlaceholder()),this._config.suggestionsThreshold==-1&&(this._config.suggestionsThreshold=this._config.liveServer?1:0)}config(e=null){return e?this._config[e]:this._config}setConfig(e,t){this._config[e]=t}_configureParent(){for(this.overflowParent=null,this.parentForm=this._selectElement.parentElement;this.parentForm&&(this.parentForm.style.overflow==="hidden"&&(this.overflowParent=this.parentForm),this.parentForm=this.parentForm.parentElement,!(this.parentForm&&this.parentForm.nodeName=="FORM")););this.parentForm&&this.parentForm.addEventListener("reset",this)}_getPlaceholder(){if(this._selectElement.hasAttribute("placeholder"))return this._selectElement.getAttribute("placeholder");if(this._selectElement.dataset.placeholder)return this._selectElement.dataset.placeholder;let e=this._selectElement.querySelector("option");return!e||!this._config.autoselectFirst?"":(v(e,"selected"),e.selected=!1,e.value?"":e.textContent)}_configureSelectElement(){this._config.hideNativeValidation?(this._selectElement.style.position="absolute",this._selectElement.style.left="-9999px"):this._selectElement.style.cssText="height:1px;width:1px;opacity:0;padding:0;margin:0;border:0;float:left;flex-basis:100%;",this._selectElement.tabIndex=-1,this._selectElement.addEventListener("focus",e=>{this.onclick(e)}),this._selectElement.addEventListener("invalid",e=>{this._holderElement.classList.add(p)})}_configureDropElement(){this._dropElement=f("ul"),this._dropElement.classList.add("dropdown-menu",b+"menu"),this._dropElement.id=b+"menu-"+j,this._dropElement.setAttribute("role","menu");let e=this._dropElement.style;e.padding="0",e.maxHeight="280px",this._config.fullWidth||(e.maxWidth="360px"),this._config.fixed&&(e.position="fixed"),e.overflowY="auto",e.overscrollBehavior="contain",e.textAlign="unset",this._dropElement.addEventListener("mouseenter",t=>{this._keyboardNavigation=!1}),this._holderElement.appendChild(this._dropElement),this._searchInput.setAttribute("aria-controls",this._dropElement.id)}_configureHolderElement(){this._holderElement.classList.add("form-control","dropdown"),this._selectElement.classList.contains("form-select-lg")&&this._holderElement.classList.add("form-control-lg"),this._selectElement.classList.contains("form-select-sm")&&this._holderElement.classList.add("form-control-sm"),this.overflowParent&&(this._holderElement.style.position="inherit"),this._getBootstrapVersion()===4&&(this._holderElement.style.height="auto"),this._config.suggestionsThreshold==0&&this._holderElement.classList.add("form-select"),this._holderElement.addEventListener("click",this)}_configureContainerElement(){this._containerElement.addEventListener("click",t=>{this.isDisabled()||this._searchInput.style.visibility!="hidden"&&this._searchInput.focus()});let e=this._containerElement.style;e.display="flex",e.alignItems="center",e.flexWrap="wrap"}_configureSearchInput(){this._searchInput=f("input"),this._searchInput.type="text",this._searchInput.autocomplete="field-"+Date.now(),this._searchInput.spellcheck=!1,y(this._searchInput,{"aria-auto-complete":"list","aria-has-popup":"menu","aria-expanded":"false","aria-label":this._config.searchLabel,role:"combobox"}),this._searchInput.style.cssText="background-color:transparent;color:currentColor;border:0;padding:0;outline:0;max-width:100%",this.resetSearchInput(!0),this._containerElement.appendChild(this._searchInput),this._rtl=window.getComputedStyle(this._searchInput).direction==="rtl"}onfocus(e){this._holderElement.classList.add(q),this.showOrSearch(),this._config.onFocus(e,this)}onblur(e){this._abortController&&this._abortController.abort();let t=!0;if(this._config.addOnBlur&&this._searchInput.value&&(t=this._enterValue()),this._holderElement.classList.remove(q),this.hideSuggestions(t),this._fireEvents){let s=this.getSelection(),i={selection:s?s.dataset.value:null,input:this._searchInput.value};this._config.onBlur(e,this),this._selectElement.dispatchEvent(new CustomEvent("tags.blur",{bubbles:!0,detail:i}))}}oninput(e){let t=this._searchInput.value;if(t){let s=t.slice(-1);if(this._config.separator.length&&this._config.separator.includes(s)){this._searchInput.value=this._searchInput.value.slice(0,-1);let i=this._searchInput.value,o=i,n={};if(this._config.allowNew)n.new=1;else{let r=this.getSelection();if(!r)return;i=r.getAttribute(g),o=r.dataset.label}this._add(o,i,n);return}}setTimeout(()=>{this._adjustWidth()}),this.showOrSearch()}onkeydown(e){let t=e.keyCode||e.key,s=e.target;switch(e.keyCode==229&&(t=s.value.charAt(s.selectionStart-1).charCodeAt(0)),t){case 13:case"Enter":e.preventDefault(),this._enterValue();break;case 38:case"ArrowUp":e.preventDefault(),this._keyboardNavigation=!0,this._moveSelection(L);break;case 40:case"ArrowDown":e.preventDefault(),this._keyboardNavigation=!0,this.isDropdownVisible()?this._moveSelection(I):this.showOrSearch(!1);break;case 8:case"Backspace":this._searchInput.value.length==0&&(this.removeLastItem(),this._adjustWidth(),this.showOrSearch());break;case 27:case"Escape":this._searchInput.focus(),this.hideSuggestions();break}}onmousemove(e){this._keyboardNavigation=!1}onscroll(e){this._positionMenu()}onresize(e){this._positionMenu()}onclick(e=null){e&&e.preventDefault(),!(!this.isSingle()&&this.isMaxReached())&&this._searchInput.focus()}onreset(e){this.reset()}loadData(e=!1){Object.keys(this._config.items).length>0?this.setData(this._config.items,!0):this.resetSuggestions(!0),this._config.server&&(this._config.liveServer||this._loadFromServer(!e))}_setSelectedAttributes(){let e=this._selectElement.selectedOptions||[];for(let t=0;t<e.length;t++)e[t].value&&!e[t].hasAttribute("selected")&&e[t].setAttribute("selected","selected")}resetState(){this.isDisabled()?(this._holderElement.setAttribute("readonly",""),this._searchInput.setAttribute("disabled",""),this._holderElement.classList.add(R)):(v(this._holderElement,"readonly"),v(this._searchInput,"disabled"),this._holderElement.classList.remove(R))}resetSuggestions(e=!1){this._setSelectedAttributes();let t=Array.from(this._selectElement.children).filter(s=>s instanceof HTMLOptGroupElement||!s.disabled||this._config.showDisabled).map(s=>s instanceof HTMLOptGroupElement?{group:s.getAttribute("label"),items:s.children}:{value:s.getAttribute("value"),label:s.textContent,disabled:s.disabled,selected:s.selected,data:Object.assign({},s.dataset)});this.setData(t,e)}_enterValue(){let e=this.getSelection();if(e)return e.click(),!0;if(this._config.allowNew&&this._searchInput.value){let t=this._searchInput.value;return!!this._add(t,t,{new:1})}return!1}_loadFromServer(e=!1){this._abortController&&this._abortController.abort(),this._abortController=new AbortController;let t=Object.assign({},this._config.serverParams);if(t[this._config.queryParam]=this._searchInput.value,this._config.noCache&&(t.t=Date.now()),t.related){let n=document.getElementById(t.related);if(n){t.related=n.value;let r=n.getAttribute("name");r&&(t[r]=n.value)}}let s=new URLSearchParams(t),i=this._config.server,o=Object.assign(this._config.fetchOptions,{method:this._config.serverMethod||"GET",signal:this._abortController.signal});o.method==="POST"?o.body=s:i+="?"+s.toString(),this._holderElement.classList.add(W),fetch(i,o).then(n=>this._config.onServerResponse(n,this)).then(n=>{let r=n[this._config.serverDataKey]||n;this.setData(r,!e),this._abortController=null,e&&this._showSuggestions()}).catch(n=>{n.name!=="AbortError"&&console.error(n)}).finally(n=>{this._holderElement.classList.remove(W)})}_add(e,t=null,s={}){if(!this.canAdd(e,s))return null;let i=this.addItem(e,t,s);return this._resetHtmlState(),this._config.keepOpen?this._showSuggestions():this.resetSearchInput(),i}_isItemEnabled(e){if(e.style.display==="none")return!1;let t=e.firstElementChild;return t.tagName==="A"&&!t.classList.contains("disabled")}_moveSelection(e=I,t=null){let s=this.getSelection();if(s){let i=e===I?"nextSibling":"previousSibling";t=s.parentNode;do t=t[i];while(t&&!this._isItemEnabled(t));t?s.classList.remove(...this._activeClasses()):s&&(t=s.parentElement)}else{if(e===L)return t;if(!t)for(t=this._dropElement.firstChild;t&&!this._isItemEnabled(t);)t=t.nextSibling}if(t){let i=t.offsetHeight,o=t.offsetTop,n=t.parentNode,r=n.offsetHeight,a=n.scrollHeight,h=n.offsetTop;if(i===0&&setTimeout(()=>{n.scrollTop=0}),e===L){let d=o-h>10?o-h:0;n.scrollTop=d}else o+i-(r+n.scrollTop)>0&&i>0&&(n.scrollTop=o+i-r+1,n.scrollTop+r>=a-10&&(n.scrollTop=o-h));let c=t.querySelector("a");c.classList.add(...this._activeClasses()),this._searchInput.setAttribute("aria-activedescendant",c.id),this._config.updateOnSelect&&(this._searchInput.value=c.dataset.label,this._adjustWidth())}else this._searchInput.setAttribute("aria-activedescendant","");return t}_adjustWidth(){this._holderElement.classList.remove(P),this._searchInput.value?this._searchInput.size=this._searchInput.value.length:this.getSelectedValues().length?(this._searchInput.placeholder="",this._searchInput.size=1):(this._searchInput.size=this._config.placeholder.length>0?this._config.placeholder.length:1,this._searchInput.placeholder=this._config.placeholder,this._holderElement.classList.add(P));let e=this._searchInput.value||this._searchInput.placeholder,t=window.getComputedStyle(this._holderElement).fontSize,s=ne(e,t)+16;this._searchInput.style.width=s+"px"}_buildSuggestions(e){for(;this._dropElement.lastChild;)this._dropElement.removeChild(this._dropElement.lastChild);let t=0,s=1;for(let i=0;i<e.length;i++){let o=e[i];if(o){if(o.group&&o.items){let n=f("li");n.setAttribute("role","presentation"),n.dataset.id=""+s;let r=f("span");if(n.append(r),r.classList.add("dropdown-header","text-truncate"),r.innerHTML=o.group,this._dropElement.appendChild(n),o.items)for(let a=0;a<o.items.length;a++){let h=o.items[a];h.group_id=s,this._buildSuggestionsItem(o.items[a],t),t++}s++}this._buildSuggestionsItem(o,t),t++}}if(this._config.notFoundMessage){let i=f("li");i.setAttribute("role","presentation"),i.classList.add(b+"not-found"),i.innerHTML='<span class="dropdown-item"></span>',this._dropElement.appendChild(i)}}_buildSuggestionsItem(e,t){if(!e[this._config.valueField])return;let s=e[this._config.valueField],i=e[this._config.labelField],o=this._config.onRenderItem(e,i,this),n=f("li");n.setAttribute("role","presentation"),e.group_id&&n.setAttribute("data-group-id",""+e.group_id);let r=f("a");n.append(r),r.id=this._dropElement.id+"-"+t,r.classList.add("dropdown-item","text-truncate"),e.disabled&&r.classList.add("disabled"),r.setAttribute(g,s),r.dataset.label=i,this._config.searchFields.forEach(a=>{n.dataset[a]=e[a]}),r.setAttribute("href","#"),r.innerHTML=o,this._dropElement.appendChild(n),r.addEventListener("mouseenter",a=>{this._keyboardNavigation||(this.removeSelection(),n.querySelector("a").classList.add(...this._activeClasses()))}),r.addEventListener("mousedown",a=>{a.preventDefault()}),r.addEventListener("click",a=>{a.preventDefault(),a.stopPropagation(),this._add(i,s,e.data),this._config.onSelectItem(e,this)})}initialOptions(){return this._selectElement.querySelectorAll("option[data-init]")}_removeSelectedAttrs(){this._selectElement.querySelectorAll("option").forEach(e=>{v(e,"selected")})}reset(){this.removeAll(),this._fireEvents=!1;let e=this.initialOptions();this._removeSelectedAttrs();for(let t=0;t<e.length;t++){let s=e[t];this.addItem(s.textContent,s.value,s.dataset)}this._resetHtmlState(),this._fireEvents=!0}resetSearchInput(e=!1){this._searchInput.value="",this._adjustWidth(),e||(this.hideSuggestions(),this._searchInput===document.activeElement&&this._searchInput.dispatchEvent(new Event("input"))),this.isMaxReached()?this._searchInput.style.visibility="hidden":this._searchInput.style.visibility=="hidden"&&(this._searchInput.style.visibility="visible"),this.isSingle()&&!e&&document.activeElement.blur()}getSelectedValues(){let e=this._selectElement.querySelectorAll("option[selected]");return Array.from(e).map(t=>t.value)}getAvailableValues(){let e=this._selectElement.querySelectorAll("option");return Array.from(e).map(t=>t.value)}showOrSearch(e=!0){if(e&&!this._shouldShow()){this.hideSuggestions(!1);return}this._config.liveServer?this._searchFunc():this._showSuggestions()}hideSuggestions(e=!0){this._dropElement.classList.remove(w),y(this._searchInput,{"aria-expanded":"false"}),this.removeSelection(),e&&this._holderElement.classList.remove(p)}toggleSuggestions(e=!0,t=!0){this._dropElement.classList.contains(w)?this.hideSuggestions(t):this.showOrSearch(e)}_shouldShow(){return this.isDisabled()||this._config.maximumItems>0&&this.getSelectedValues().length>=this._config.maximumItems?!1:this._searchInput.value.length>=this._config.suggestionsThreshold}_showSuggestions(){if(document.activeElement!=this._searchInput||this._searchInput.style.visibility=="hidden")return;let e=k(this._searchInput.value),t={},s=this._dropElement.querySelectorAll("li"),i=0,o=null,n=!1,r={};for(let a=0;a<s.length;a++){let h=s[a],c=h.firstElementChild;if(c instanceof HTMLSpanElement){h.dataset.id&&(r[h.dataset.id]=!1),C(h);continue}if(c.classList.remove(...this._activeClasses()),!this._config.allowSame){let u=c.getAttribute(g);if(t[u]=t[u]||0,this._findOption(c.getAttribute(g),"[selected]",t[u]++)){C(h);continue}}let d=this._config.showAllSuggestions||e.length===0,_=e.length==0&&this._config.suggestionsThreshold===0;!d&&e.length>0&&this._config.searchFields.forEach(u=>{let m=k(c.dataset[u]);(this._config.fuzzy?re(m,e):m.indexOf(e)>=0)&&(_=!0)});let S=_||e.length===0;if(d||_?(i++,z(h),h.dataset.groupId&&(r[h.dataset.groupId]=!0),!o&&this._isItemEnabled(h)&&S&&(o=h),this._config.maximumItems>0&&i>this._config.maximumItems&&C(h)):C(h),this._config.highlightTyped){let u=c.textContent,m=k(u).indexOf(e),H=u.substring(0,m)+`<mark>${u.substring(m,m+e.length)}</mark>`+u.substring(m+e.length,u.length);c.innerHTML=H}this._isItemEnabled(h)&&(n=!0)}if(!this._config.allowNew&&!(e.length===0&&!n)&&this._holderElement.classList.add(p),this._config.allowNew&&this._config.regex&&this.isInvalid()&&this._holderElement.classList.remove(p),Array.from(s).filter(a=>a.dataset.id).forEach(a=>{r[a.dataset.id]===!0&&z(a)}),n&&(this._holderElement.classList.remove(p),o&&this._config.autoselectFirst&&(this.removeSelection(),this._moveSelection(I,o))),i===0)if(this._config.notFoundMessage){let a=this._dropElement.querySelector("."+b+"not-found");a.style.display="block";let h=this._config.notFoundMessage.replace("{{tag}}",this._searchInput.value);a.innerHTML=`<span class="dropdown-item">${h}</span>`,this._showDropdown()}else this.hideSuggestions(!1);else this._showDropdown()}_showDropdown(){this._dropElement.classList.add(w),y(this._searchInput,{"aria-expanded":"true"}),this._positionMenu()}_positionMenu(){let e=this._rtl,t=this._searchInput.getBoundingClientRect(),s=null,i=null;if(this._config.fixed?(this._config.fullWidth?s=this._holderElement.getBoundingClientRect().x:s=t.x,i=t.y+t.height):this._config.fullWidth?s=0:s=this._searchInput.offsetLeft,e&&!this._config.fullWidth&&(s-=this._dropElement.offsetWidth-t.width),!this._config.fullWidth){let r=Math.min(window.innerWidth,document.body.offsetWidth),a=e?t.x+t.width-this._dropElement.offsetWidth-1:r-1-(t.x+this._dropElement.offsetWidth);a<0&&(s=e?s-a:s+a)}this._dropElement.style.transform="unset",this._config.fullWidth&&(this._dropElement.style.width=this._holderElement.offsetWidth+"px"),s!==null&&(this._dropElement.style.left=s+"px"),i!==null&&(this._dropElement.style.top=i+"px");let o=this._dropElement.getBoundingClientRect(),n=window.innerHeight;o.y+o.height>n&&(this._dropElement.style.transform="translateY(calc(-100% - "+this._searchInput.offsetHeight+"px))")}_getBootstrapVersion(){let e=5;return window.jQuery&&$.fn.tooltip!=null&&$.fn.tooltip.Constructor!=null&&(e=parseInt($.fn.tooltip.Constructor.VERSION.charAt(0))),e}_isSelected(e){return!!Array.from(this._selectElement.querySelectorAll("option")).find(s=>s.textContent==e&&s.getAttribute("selected"))}_isSelectable(e){return!!Array.from(this._selectElement.querySelectorAll("option")).find(s=>s.textContent==e&&!s.getAttribute("selected"))}_validateRegex(e){return new RegExp(this._config.regex.trim()).test(e)}getSelection(){return this._dropElement.querySelector("a."+B)}removeSelection(){let e=this.getSelection();e&&e.classList.remove(...this._activeClasses())}_activeClasses(){return[...this._config.activeClasses,B]}getActiveSelection(){return this.getSelection()}removeActiveSelection(){return this.removeSelection()}removeAll(){this.getSelectedValues().forEach(t=>{this.removeItem(t,!0)}),this._adjustWidth()}removeLastItem(e=!1){let t=this._containerElement.querySelectorAll("span."+b+"badge");if(!t.length)return;let s=t[t.length-1];this.removeItem(s.getAttribute(g),e)}enable(){this._selectElement.setAttribute("disabled",""),this.resetState()}disable(){v(this._selectElement,"disabled"),this.resetState()}isDisabled(){return this._selectElement.hasAttribute("disabled")||this._selectElement.disabled||this._selectElement.hasAttribute("readonly")}isDropdownVisible(){return this._dropElement.classList.contains(w)}isInvalid(){return this._holderElement.classList.contains(p)}isSingle(){return!this._selectElement.hasAttribute("multiple")}isMaxReached(){return this._config.max&&this.getSelectedValues().length>=this._config.max}canAdd(e,t={}){return!e||t.new&&!this._config.allowNew||this.isDisabled()||!this.isSingle()&&!this._config.allowSame&&(t.new&&this._isSelected(e)||!t.new&&!this._isSelectable(e))||this.isMaxReached()?!1:this._config.regex&&t.new&&!this._validateRegex(e)?(this._holderElement.classList.add(p),!1):this._config.onCanAdd&&this._config.onCanAdd(e,t,this)===!1?(this._holderElement.classList.add(p),!1):!0}setData(e,t=!1){Array.isArray(e)||(e=Object.entries(e).map(([s,i])=>({value:s,label:i}))),t&&(this._removeSelectedAttrs(),e.forEach(s=>{let i=s[this._config.valueField],o=s[this._config.labelField];if(i&&(s.selected||this._config.selected.includes(i))){let n=this.addItem(o,i,s.data);n&&n.setAttribute("data-init","true")}})),this._buildSuggestions(e),this._resetHtmlState()}_findOption(e,t="",s=0){let o='option[value="'+CSS.escape(e)+'"]'+t;return this._selectElement.querySelectorAll(o)[s]||null}addItem(e,t=null,s={}){t||(t=e),this.isSingle()&&this.getSelectedValues().length&&this.removeLastItem(!0);let i=this._findOption(t,":not([selected])");if(!i){i=f("option"),i.value=t,i.textContent=e;for(let[o,n]of Object.entries(s))i.dataset[o]=n;this._selectElement.appendChild(i),this._config.onCreateItem(i,this)}return i&&(s=Object.assign({title:i.getAttribute("title")},s,i.dataset)),i.setAttribute("selected","selected"),i.selected=!0,this._createBadge(e,t,s),this._fireEvents&&this._selectElement.dispatchEvent(new Event("change",{bubbles:!0})),i}_resetHtmlState(){let e=this._selectElement.innerHTML;this._selectElement.innerHTML="",this._selectElement.innerHTML=e,this._adjustWidth()}_createBadge(e,t=null,s={}){let i=this._getBootstrapVersion()===5,o=this._config.allowClear&&!s.disabled,n=e,r=f("span"),a=[b+"badge"],h=this.isSingle()&&!this._config.singleBadge;if(!h){a.push("badge");let d=this._config.badgeStyle;s.badgeStyle&&(d=s.badgeStyle),s.badgeClass&&a.push(...s.badgeClass.split(" ")),this._config.baseClass?a.push(...this._config.baseClass.split(" ")):i?a=[...a,"bg-"+d,"text-truncate"]:a=[...a,"badge-"+d],r.style.maxWidth="100%"}s.disabled&&a.push("disabled","opacity-50");let c=h?0:2;if(r.style.margin=c+"px 6px "+c+"px 0px",r.style.marginBlock=c+"px",r.style.marginInline="0px 6px",r.classList.add(...a),r.setAttribute(g,t),s.title&&r.setAttribute("title",s.title),o){r.style.display="inline-flex",r.style.alignItems="center";let d=a.includes("text-dark")||h?"btn-close":"btn-close btn-close-white",_="margin-inline: 0px 6px;",S="";this._config.clearEnd&&(_="margin-inline: 6px 0px;",S="order:2;"),n=(i?'<button type="button" style="font-size:0.65em;'+S+_+'" class=" '+d+'" aria-label="'+this._config.clearLabel+'"></button>':'<button type="button" style="font-size:1em;'+S+_+'text-shadow:none;color:currentColor;transform:scale(1.2)" class=" close" aria-label="'+this._config.clearLabel+'"><span aria-hidden="true">&times;</span></button>')+n}r.innerHTML=n,this._containerElement.insertBefore(r,this._searchInput),window.bootstrap&&window.bootstrap.Tooltip&&i&&window.bootstrap.Tooltip.getOrCreateInstance(r),o&&r.querySelector("button").addEventListener("click",d=>{d.preventDefault(),d.stopPropagation(),this.isDisabled()||(this.removeItem(t),document.activeElement.blur(),this._adjustWidth())})}removeItem(e,t=!1){let s=CSS.escape(e),i=this._containerElement.querySelectorAll("span["+g+'="'+s+'"]');if(!i.length)return;let o=i.length-1;i[o].remove();let n=this._findOption(e,"[selected]",o);n&&(v(n,"selected"),n.selected=!1,this._fireEvents&&!t&&this._selectElement.dispatchEvent(new Event("change",{bubbles:!0}))),this._searchInput.style.visibility=="hidden"&&!this.isMaxReached()&&(this._searchInput.style.visibility="visible"),t||this._config.onClearItem(e,this)}},G=E;var T=l=>typeof l=="string";var O=l=>l.split(".").reduce((e,t)=>e[t],window);var U=l=>{T(l)&&(l=l[0]=="{"?JSON.parse(l):O(l));for(let[e,t]of Object.entries(l))if(t&&typeof t=="object"){let s=t.__fn;T(s)?l[e]=O(s):U(t)}return l},J=U;var K=l=>{let e=l;do{if(e.nextSibling){l.parsedCallback();return}e=e.parentNode}while(e);setTimeout(()=>{K(l)})},X=K;var F,D=class extends HTMLElement{connectedCallback(){F&&clearTimeout(F),X(this)}disconnectedCallback(){this.disconnected(),F=setTimeout(()=>{this.destroyed(),this.config=null},1e3)}parsedCallback(){this.config||(this.config=J(this.dataset.config||{}),this.created()),this.connected()}created(){}destroyed(){}connected(){}disconnected(){}},Y=D;var Q=(l,e)=>{e=typeof e=="string"?[e]:e,e.forEach(t=>{l.querySelectorAll(t).forEach(s=>{s.remove()})})};var M=class extends Y{get el(){return this.querySelector("select")}get value(){return this.el.value}created(){Q(this,"div.dropdown"),this.tags=new G(this.el,this.config)}destroyed(){this.tags.dispose(),this.tags=null}},N=M;var Z=customElements,ee=(l,e)=>{Z.get(l)||Z.define(l,e)};var te=".form-control-focus,.form-control:focus{color:var(--bs-body-color, #212529);background-color:var(--bs-form-control-bg, var(--bs-body-bg, #fff));border-color:rgba(var(--bs-primary-rgb, 13, 110, 253), 0.5);outline:0;box-shadow:0 0 0 var(--bs-focus-ring-width) rgba(var(--bs-primary-rgb, 13, 110, 253), 0.25)}.was-validated :valid+.form-control-focus,.was-validated :valid+.form-control:focus{border-color:var(--bs-success, #198754);box-shadow:0 0 0 var(--bs-focus-ring-width) rgba(var(--bs-success-rgb, 25, 135, 84), 0.25)}.was-validated :invalid+.form-control-focus,.was-validated :invalid+.form-control:focus{border-color:var(--bs-danger, #dc3545);box-shadow:0 0 0 var(--bs-focus-ring-width, 0.25rem) rgba(var(--bs-danger-rgb, 220, 53, 69), 0.25)}.form-floating .form-control.form-placeholder-shown:not(.form-control-focus)~label{opacity:unset;transform:unset}.form-floating .form-control~label{z-index:unset}.form-control-disabled{background-color:var(--bs-form-control-disabled-bg, var(--bs-secondary-bg, #e9ecef));opacity:1}.tags-menu mark{text-decoration:underline;background:none;color:currentColor;padding:0}";var se=(l,e)=>{if(!document.head.querySelector(`#${l}-style`)){let t=document.createElement("style");t.id=`${l}-style`,t.innerText=e,document.head.append(t)}};se("bs-tags",te);ee("bs-tags",N);var Oe=N;})();
