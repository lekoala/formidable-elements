"use strict";(()=>{var a=t=>typeof t=="string";var f=t=>t.split(".").reduce((e,i)=>e[i],window);var b=t=>{a(t)&&(t=t[0]=="{"?JSON.parse(t):f(t));for(let[e,i]of Object.entries(t))if(i&&typeof i=="object"){let n=i.__fn;a(n)?t[e]=f(n):b(i)}return t},D=b;var v=t=>t?(t.includes(":")&&t[0]!="{"&&(t=`{${t.replace(/([\w]*)\s*:\s*([\w"'\[\]]*)/,(e,i,n)=>`"${i}":${n.replace(/'/g,'"')}`)}}`),t[0]=="{"?JSON.parse(t):f(t)):{};var H=t=>{let e=t;do{if(e.nextSibling){t.parsedCallback();return}e=e.parentNode}while(e);setTimeout(()=>{t.parsedCallback()})},x=H;var u="__id";window[u]=window[u]||0;var l=new Map,d=class extends HTMLElement{constructor(){super(),this.id=this.id||`ce-${window[u]++}`,l.has(this.id)?this.innerHTML=l.get(this.id):l.set(this.id,this.innerHTML)}connectedCallback(){this._t&&clearTimeout(this._t),x(this)}disconnectedCallback(){this.disconnected(),this._t=setTimeout(()=>{this.destroyed(),this.config=null,document.getElementById(this.id)||l.delete(this.id)},1e3)}parsedCallback(){this.config||(this.config=D(v(this.dataset.config)),this.created()),this.connected()}created(){}destroyed(){}connected(){}disconnected(){}},M=d;function C(t,e=null){e||(e=new Date);let i=e instanceof Date?e.getTime():e;return t.seconds&&(i+=1e3*t.seconds),t.minutes&&(i+=1e3*60*t.minutes),t.hours&&(i+=1e3*60*60*t.hours),t.days&&(i+=1e3*60*60*24*t.days),new Date(i)}function k(t){let e=t instanceof Date?t.getTime():t;return{days:Math.floor(e/(1e3*60*60*24)),hours:Math.floor(e%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(e%(1e3*60*60)/(1e3*60)),seconds:Math.floor(e%(1e3*60)/1e3)}}function h(t){return t?t instanceof Date?t:new Date(t):new Date}function I(t,e,i){return e=e||t,i.nodeType==1&&(e=`:scope ${e}`),e}function g(t,e=null,i=document){return i.querySelector(I(t,e,i))}var S=(t,e="default",i=null)=>{let n=customElements.get("locale-provider");return n?Object.assign(i||{},n.for(t,e)):i};var L="count-down";function p(t,e=2){return t.toString().padStart(e,"0")}function _(t,e,i=2){let n={seconds:60,minutes:60,hours:24,days:1},r=0,o=!1;for(let[s,T]of Object.entries(n)){let c=t[s];s==e?(r+=c,o=!0):o?r+=c*T:r+=c/T}return(Math.round(r*100)/100).toFixed(i)}function m(t,e){let i=k(t.diff);if(e.config.unit)t[e.config.unit]=_(i,e.config.unit,e.config.decimalDigits);else{let n=e.config.pad?2:1;t.days=i.days.toString(),t.hours=p(i.hours,n),t.minutes=p(i.minutes,n),t.seconds=p(i.seconds,n)}for(let[n,r]of Object.entries(e.config.labels)){let o=g(`.${n} .value`,null,e),s=g(`.${n} .label`,null,e);o&&o.innerHTML!=t[n]&&(o.innerHTML=t[n],n==="days"&&t[n]=="0"&&o.parentElement.setAttribute("hidden","")),s&&(s.dataset.singular&&(t[n]=="1"||t[n]=="01")?s.innerHTML=s.dataset.singular:s.dataset.plural&&(s.innerHTML=s.dataset.plural))}}var w=class extends M{created(){this.config=Object.assign({locale:this.dataset.locale||"default",timer:!0,pad:!1,decimalDigits:0,labels:{days:"d",hours:"h",minutes:"m",seconds:"s"},interval:1e3},this.config),this.config.labels=S(L,this.config.locale,this.config.labels),["start","end","url"].forEach(o=>{let s=this.dataset[o];s&&(this.config[o]=s),typeof this.config[o]=="object"&&(this.config[o]=C(this.config[o]))});let e=h(this.config.start),i=h(this.config.end);if(!e||!i)return;this.firstChild||(this.innerHTML=Object.keys(this.config.labels).reduce((o,s)=>this.config.unit&&this.config.unit!=s?o:`${o} <span class="unit ${s}"><span class="value"></span><span class="label">${this.config.labels[s]}</span></span>`,""));let n=new Date().getTime()-e.getTime(),r={};r.diff=i.getTime()-e.getTime(),m(r,this),this.config.timer&&(this.config.onInit&&this.config.onInit(this),this.interval=setInterval(()=>{if(r.diff<=0){clearInterval(this.interval),r.diff=0,m(r,this),this.config.onComplete&&this.config.onComplete(this),this.config.reloadOnComplete?window.location.reload():this.config.url&&window.location.replace(this.config.url);return}m(r,this),this.config.onTick&&this.config.onTick(this,r);let o=new Date;r.diff=i.getTime()-o.getTime()+n},this.config.interval))}destroyed(){this.interval&&clearInterval(this.interval)}},y=w;var E=customElements,$=(t,e)=>{E.get(t)||E.define(t,e)};$("count-down",y);var nt=y;})();
